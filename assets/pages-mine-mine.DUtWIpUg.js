import{r as a,k as l,c as e,w as s,j as t,m as u,n as d,i,q as n,o,a as c,B as r,b as v,t as f,d as _,e as p,F as m,f as g,p as k}from"./index-B7mrdbYj.js";import{_ as y}from"./plugin-vueexport-helper.BCo6x5W8.js";const w=y({__name:"mine",setup(y){const w=a([]),x=a([]),C=a([]),h=a(decodeURIComponent(l("key"))),$=()=>new Promise(((a,l)=>{a(u({url:`https://zyxcl.xyz/music/api/login/status?cookie=${h.value}`,withCredentials:!0}))}));(async()=>{var a,l,e,s;await t(),w.value=await $(),u({url:`https://zyxcl.xyz/music/api/user/detail?uid=${null==(l=null==(a=w.value.data)?void 0:a.data.account)?void 0:l.id}&cookie=${h.value}`,withCredentials:!0,success:a=>{x.value=a.data}}),u({url:`https://zyxcl.xyz/music/api/user/playlist?uid=${null==(s=null==(e=w.value.data)?void 0:e.data.account)?void 0:s.id}&cookie=${h.value}`,withCredentials:!0,success:a=>{console.log(a.data),C.value=a.data}})})();const z=()=>{d({url:"/pages/login/login"})},I=a((a=>{console.log(a),d({url:`/pages/songlist/songlist?id=${a}`})}));return(a,l)=>{const t=g,u=i,d=k,y=n;return h.value?(o(),e(u,{key:0,class:"mine"},{default:s((()=>[c(u,{class:"header"},{default:s((()=>{var a;return[c(u,{class:"user",style:r({backgroundImage:`url(${null==(a=x.value.profile)?void 0:a.backgroundUrl})`})},{default:s((()=>{var a,l;return[c(t,{src:null==(l=null==(a=w.value)?void 0:a.data)?void 0:l.data.profile.avatarUrl,mode:""},null,8,["src"]),c(u,{class:"nickname"},{default:s((()=>{var a,l;return[v(f(null==(l=null==(a=w.value)?void 0:a.data)?void 0:l.data.profile.nickname),1)]})),_:1}),c(u,{class:"desc"},{default:s((()=>[c(u,{class:"desc_tag"},{default:s((()=>[c(d,null,{default:s((()=>{var a;return[v(f(null==(a=x.value.profile)?void 0:a.follows),1)]})),_:1}),v("关注")])),_:1}),c(u,{class:"desc_tag"},{default:s((()=>[c(d,null,{default:s((()=>{var a;return[v(f(null==(a=x.value.profile)?void 0:a.followeds),1)]})),_:1}),v("粉丝")])),_:1}),c(u,{class:"desc_tag"},{default:s((()=>[c(d,null,{default:s((()=>[v("LV"+f(x.value.level),1)])),_:1}),v("等级")])),_:1}),c(u,{class:"desc_tag"},{default:s((()=>[c(d,null,{default:s((()=>[v(f(x.value.listenSongs),1)])),_:1}),v("听歌")])),_:1})])),_:1})]})),_:1},8,["style"])]})),_:1}),c(u,{class:"main"},{default:s((()=>[c(u,{class:"lists"},{default:s((()=>[(o(!0),_(m,null,p(C.value.playlist,(a=>(o(),e(u,{class:"list",onClick:l=>I.value(a.id)},{default:s((()=>[c(u,{class:"pic"},{default:s((()=>[c(t,{src:a.coverImgUrl,mode:""},null,8,["src"])])),_:2},1024),c(u,{class:"list_item"},{default:s((()=>[c(d,{class:"listName"},{default:s((()=>[v(f(a.name),1)])),_:2},1024),c(d,{class:"rec"},{default:s((()=>[v(f(a.trackCount)+" 首 "+f(a.playCount)+" 次播放",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})):(o(),e(y,{key:1,onClick:z},{default:s((()=>[v("去登录")])),_:1}))}}},[["__scopeId","data-v-0fe3436a"]]);export{w as default};
